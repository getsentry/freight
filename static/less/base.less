@import "./bootstrap-overrides.less";
@import "./bootstrap-variables.less";

// Colors

@dark:      #3E3947;
@lessDark:  lighten(@dark, 5%);
@light:     #F7F7F8;
@blue:      #4FCFD1;
@purple:    #9F83CF;
@green:     #4DD191;
@red:       #DC5656;

body {
    background: @dark;
    color: @light;
    font-family: "Avenir Next", "Avenir", "Helvetica Neue", sans-serif;
}

a,
a:active,
a:focus,
a:hover,
a:visited {
    color: @purple;
}

h1, h2, h3, h4, h5, h6 {
  font-weight: 500;
}

h1 {
  font-size: 32px;
}

h2 {
  font-size: 24px;
}

h3 {
  font-size: 20px;
}


h1, h2, h3, h4, h5, h6,
p, table, ul, dl form,
.page-header, .log {
    margin-top: 0;
    margin-bottom: 30px;
}

body {
    padding-top: 69px;
}

header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background: @light;
    border-bottom: 1px solid @lessDark;

    .container {
      padding: 10px 15px;
      height: 49px;
    }

    .btn-default {
      color: @light;

      &:focus, &:hover {
        color: #fff;
      }
      &.active {
        color: @dark;
        background-color: @light;
        border-color: @lessDark;
        &:focus, &:hover {
          background-color: @light;
          color: @dark;
          border-color: @lessDark;
        }
      }
    }

    h1 {
        display: inline-block;
        margin: 0;
        vertical-align: middle;
        a {
            background: url(../img/freight-logo.png);
            background-size: 122px 28px;
            text-indent: -9999em;
            display: block;
            width: 122px;
            height: 28px;
        }
    }

    h2 {
        color: @lessDark;
        font-size: 20px;
        vertical-align: middle;
        display: inline-block;
        margin: 5px 0 0 10px;
    }
}

.page-header {
    h1, h2, h3 {
        margin-bottom: 0;
    }
}

.container {
    max-width: 960px;
}

.body {
  padding: 10px 0;
}

.create-deploy {
  .clearfix;
  background: @light;
  color: @dark;
  padding: 20px 20px 0;
  position: relative;
  max-width: 600px;
  margin: 0 auto;
  border-radius: 4px;

  .submit-group {
    margin: 20px -20px -10px;
    border-top: 1px solid lighten(@dark, 40%);
    padding: 10px 20px 0;
    text-align: right;
  }

  .btn-primary {
    font-weight: bold;
    background: #fff;
    color: @dark;
    text-transform: uppercase;
    font-size: 13px;
    border-color: lighten(@dark, 40%);

    &:hover, &:focus {
      border-color: @lessDark;
    }
  }
}

.nav-pills > li.active > a,
.nav-pills > li.active > a:active,
.nav-pills > li.active > a:hover,
.nav-pills > li.active > a:focus,
.nav-pills > li.active > a:visited {
    background-color: #79589F;
}

.btn-active,
.btn-active:hover,
.btn-active:focus {
    border-color: #79589F;
    background-color: #79589F;
    color: #fff;
}

.btn-default {
  background-color: @lessDark;
  border-color: @lessDark;
  color: @light;

  &:hover, &.btn-active {
    background-color: lighten(@lessDark, 10%);
    border-color: lighten(@lessDark, 10%);
    color: @light;
  }
}

.btn input[type=checkbox] {
  margin-right: 5px;
}

.section {
  .section-header h2 {
    text-transform: uppercase;
    font-size: 18px;
    margin-bottom: 10px;
  }
  margin-bottom: 20px;
}

.deploy-list {
    padding-left: 0;
    list-style: none;

    > .deploy {
      margin-bottom: 3px;
    }
}

.deploy {
    .clearfix();
    padding: 15px;
    background: @lessDark;
    border-radius: 4px;
    cursor: pointer;

    &:hover {
        background: #585262;
    }

    h3 {
        font-size: 12pt;
        margin: 0;
        display: inline-block;
    }

    .ref {
        float: right;
        text-align: right;

        .sha {
            font-size: 12pt;
            margin-bottom: 5px;
        }
    }

    .meta {
        margin-top: 5px;
    }

    &.finished {
      border-left: 8px solid #3ED33E;
      &.cancelled {
        border-left-color: #7B7B7B;
      }
      &.failed {
        border-left-color: #D33E3E;
      }
    }

    &.active {
        z-index: 2;
        position: relative;

        .progress {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            z-index: -1;
            border-radius: 4px;

            background-size: 30px 30px;
            background-image: linear-gradient(135deg, rgba(63, 56, 74, .7) 25%, transparent 25%,
                                transparent 50%, rgba(63, 56, 74, .7) 50%, rgba(63, 56, 74, .7) 75%,
                                transparent 75%, transparent);

            -webkit-animation: animate-stripes 2s linear infinite;
        }
    }
}

@-webkit-keyframes animate-stripes {
    0% {background-position: 0 0;} 100% {background-position: 60px 0;}
}


.deploy-details {
  padding-top: 40px;
  padding-bottom: 30px;

  .deploy-header {
    z-index: 1000;
    background: @lessDark;
    color: @light;
    position: fixed;
    left: 0;
    right: 0;
    top: 48px;
    border-bottom: 1px solid @lessDark;
    padding-top: 10px;

    > .container {
      height: 53px;
      position: relative;
    }

    h3 {
      font-size: 12pt;
      margin: 0;
      display: inline-block;
    }

    .ref {
      float: right;
      text-align: right;

      .sha {
        font-size: 12pt;
        margin-bottom: 5px;
      }
    }

    .meta {
      display: block;
      margin-top: 5px;
    }
  }

  &.finished .deploy-header .container {
    padding-left: 32px;
  }

  &.finished .deploy-header .container h3:before {
    content: "";
    width: 8px;
    border-radius: 4px;
    position: absolute;
    top: 0;
    bottom: 12px;
    left: 15px;
    background: #3ED33E;
  }
  &.cancelled .deploy-header .container h3:before {
    background-color: #7B7B7B;
  }
  &.failed .deploy-header .container h3:before {
    background-color: #D33E3E;
  }

  .deploy-footer {
    z-index: 1000;
    background: @dark;
    color: @light;
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    line-height: 45px;
    height: 50px;

    .btn {
      margin-left: 5px;
    }
  }

  .deploy-actions {
    float: right;
  }

  .deploy-progress {
    border: 1px solid @lessDark;
    border-radius: 4px;
    position: relative;
    height: 28px;
    margin-top: 10px;
    margin-right: 150px;

    .progress {
      display: block;
      position: absolute;
      border-radius: 4px;
      top: 0;
      left: 0;
      bottom: 0;
      background: lighten(@dark, 20%);
    }
  }

  &.finished {
    .deploy-progress {
      display: none;
    }
  }

  &.active {
    position: relative;

    .progress {
      background-size: 30px 30px;
      background-image: linear-gradient(135deg, rgba(63, 56, 74, .7) 25%, transparent 25%,
                          transparent 50%, rgba(63, 56, 74, .7) 50%, rgba(63, 56, 74, .7) 75%,
                          transparent 75%, transparent);

      -webkit-animation: animate-stripes 2s linear infinite;
    }
  }

  .deploy-log {
    padding: 5px;

    .line {
      font-family: monospace, serif;
      font-size: 0.9em;
      white-space: pre-wrap;
      line-height: 20px;
    }
  }
}

figure.barchart {
  .clearfix();
  position: relative;
  background: @lessDark;
  border-radius: 4px;
  padding: 2px;

  > .max-y,
  > .min-y {
    position: absolute;
    width: 18px;
    right: 5px;
    text-align: right;
    color: lighten(@lessDark, 20%);
    font-size: 10px;
  }

  > .max-y {
    top: 4px;
  }
  > .min-y {
    bottom: 3px;
  }

  > a {
    position: relative;
    float: left;
    height: 100px;
    display: block;

    &:hover {
      > span {
        background: #fff;
        border-color: #fff;
      }
    }

    > span {
      display: block;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 1px;
      background: lighten(@lessDark, 10%);
      min-width: 10px;
      height: 0;
      overflow: hidden;
      text-indent: -9999px;
      text-align: left;
      min-height: 3px;
      border-radius: 2px 2px 0 0;
    }
  }
}

.loading {
  margin: 6em auto;
  position: relative;

  .loading-indicator {
    text-indent: -9999em;
    border-top: 6px solid @light;
    border-right: 6px solid @light;
    border-bottom: 6px solid @light;
    border-left: 6px solid @gray;
    -webkit-animation: loading .5s infinite linear;
    animation: loading .55s infinite linear;
    border-radius: 50%;
    width: 64px;
    height: 64px;
    margin: 0 auto;
  }

  .loading-message {
    margin-top: 20px;
    text-align: center;
  }
}

.loading {
  margin: 20px 0;
}

@-webkit-keyframes loading {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@keyframes loading {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

.loading.mini {
  margin: 4px 0;
  font-size: 13px;

  .loading-indicator {
    margin: 0;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    border-width: 2px;
    position: absolute;
    left: 0;
    top: 0;
  }

  .loading-message {
    padding-left: 30px;
    margin-top: 1px;
    display: inline-block;
  }
}

.loading.global {
  .loading.mini();
  padding: 20px 30px;
  font-size: 15px;
  z-index: 100000;
  border-radius: 3px;

  position: fixed;
  bottom: 0;
  right: 20px;
  background: rgba(0, 0, 0, .6);
  color: #fff;

  .transition(.2s bottom ease-in-out);

  .loading-indicator {
    top: 20px;
    left: 24px;
  }

  .loading-message {
    padding-left: 24px;
  }

  .loading-mask {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(52, 60, 69, .4);
    z-index: -1;
    opacity: 0;
    visibility: hidden;
    .transition(opacity .1s linear);
  }

  &.active {
    bottom: 20px;
    .loading-mask {
      visibility: visible;
      opacity: 1;
    }
  }
}
